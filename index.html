<!-- index.html -->

<!DOCTYPE html>
<html lang="en">

<head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Real-time Notifications</title>
</head>

<body>
        <ul id="notifications"></ul>

        <script>
                const ws = new WebSocket('ws://localhost:8080');

                ws.onmessage = function (event) {
                        const notificationData = JSON.parse(event.data);
                        const notificationsList = document.getElementById('notifications');
                        notificationsList.innerHTML = ''; // Clear existing notifications

                        // Display approaching projects with days remaining
                        notificationData.approachingProjects.forEach(project => {
                                const li = document.createElement('li');
                                const daysRemaining = project.daysRemaining;
                                li.textContent = `Approaching project: ${project.project.project_name} (${daysRemaining} days remaining)`;
                                notificationsList.appendChild(li);
                        });

                        // Display overdue projects
                        notificationData.overdueProjects.forEach(project => {
                                const li = document.createElement('li');
                                const daysRemaining = project.daysExceeded;
                                li.textContent = `Overdue project: ${project.project.project_name} (${daysRemaining} days exceeded)`;
                                notificationsList.appendChild(li);
                        });

                        // Display outdated leads
                        notificationData.outdatedLeads.forEach(lead => {
                                const li = document.createElement('li');
                                li.textContent = `Outdated lead: ${lead.lead_id}`;
                                notificationsList.appendChild(li);
                        });
                };
        </script>
</body>

</html>